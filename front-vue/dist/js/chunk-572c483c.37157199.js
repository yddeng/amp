(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-572c483c"],{5964:function(e,t,s){},"8d2e":function(e,t,s){"use strict";s("5964")},"96d7":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("a-card",{attrs:{bordered:!1}},[s("div",{staticStyle:{marginBottom:"24px"}},[s("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.showEdit("add")}}},[e._v("新增")])],1),s("s-table",{ref:"table",attrs:{rowKey:"username",size:"default","data-name":"userList",columns:e.columns,handleMethods:e.handleDataList,data:e.loadData},scopedSlots:e._u([{key:"password",fn:function(t){return[s("span",{directives:[{name:"show",rawName:"v-show",value:t.showPassword,expression:"password.showPassword"}]},[e._v(e._s(t.password))]),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.showPassword,expression:"!password.showPassword"}]},[e._v("******")]),t.showPassword?s("a-icon",{staticClass:"icon-right",attrs:{type:"eye-invisible"},on:{click:function(e){t.showPassword=!1}}}):s("a-icon",{staticClass:"icon-right",attrs:{type:"eye"},on:{click:function(e){t.showPassword=!0}}})]}},{key:"action",fn:function(t){return[s("div",{staticClass:"table-operation"},[s("a-popconfirm",{attrs:{title:"确定要删除吗？"},on:{confirm:function(s){return e.dele(t)}}},[s("a-tooltip",[s("template",{slot:"title"},[e._v("删除")]),s("a-icon",{attrs:{type:"delete"}})],2)],1)],1)]}}])})],1),s("edit-model",{ref:"editMod",attrs:{visible:e.visible,model:e.mdl,"is-edit":e.isEdit},on:{cancel:e.handleCancel,success:e.handleOk}})],1)},n=[],o=s("5530"),i=(s("d81d"),s("d3b7"),s("2af9")),r=s("b775"),l={userList:"user/list",userAdd:"user/add",userDelete:"user/delete"};function d(e){return Object(r["b"])({url:l.userList,method:"post",data:e})}function c(e){return Object(r["b"])({url:l.userAdd,method:"post",data:e})}function u(e){return Object(r["b"])({url:l.userDelete,method:"post",data:e})}var m=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a-modal",{staticClass:"form",attrs:{title:e.isEdit?"编辑用户":"添加用户",width:800,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.submitForm,cancel:e.cancel}},[s("a-form-model",{ref:"editModal",attrs:{model:e.form,rules:e.formRule,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[s("a-form-model-item",{attrs:{label:"用户名",prop:"username"}},[s("a-input",{attrs:{placeholder:"用户名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),s("a-form-model-item",{attrs:{label:"密码",prop:"password"}},[s("a-input",{attrs:{placeholder:"请输入密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1)],1)},f=[],p={name:"EditModel",props:{visible:{type:Boolean,required:!0},isEdit:{type:Boolean,required:!0},loading:{type:Boolean,default:function(){return!1}},model:{type:Object,default:function(){return null}}},data:function(){return{labelCol:{span:6},wrapperCol:{span:12},confirmLoading:!1,form:{username:null,code:null},formRule:h}},watch:{model:{handler:function(e){e&&e.username?this.form=Object(o["a"])({},e):this.form={}},deep:!0,immediate:!0}},created:function(){},methods:{submitForm:function(){var e=this;this.$refs.editModal.validate((function(t){if(t)if(e.confirmLoading=!0,e.isEdit);else{var s=Object(o["a"])({},e.form);c(s).then((function(t){e.$refs.editModal.resetFields(),e.$emit("success")})).catch((function(e){})).finally((function(t){e.confirmLoading=!1}))}else e.confirmLoading=!1}))},cancel:function(){this.$refs.editModal.resetFields(),this.$emit("cancel")}}},h={username:[{required:!0,message:"请输入用户名",trigger:"change"}],password:[{required:!0,message:"请输入密码",trigger:"change"}]},w=p,b=s("2877"),v=Object(b["a"])(w,m,f,!1,null,"230769f4",null),g=v.exports,y={name:"UserGroup",components:{STable:i["a"],EditModel:g},data:function(){return{columns:k,loadData:function(e){return d(e).then((function(e){return e}))},visible:!1,confirmLoading:!1,isEdit:!0,mdl:null}},methods:{handleDataList:function(e){var t=e.map((function(e){return Object(o["a"])(Object(o["a"])({},e),{},{showPassword:!1})}));return t},handleOk:function(){this.$refs.table.refresh(),this.visible=!1,this.mdl={}},handleCancel:function(){this.visible=!1,this.mdl={}},showEdit:function(e,t){this.visible=!0,"edit"===e?(this.isEdit=!0,this.mdl=Object(o["a"])({},t)):(this.isEdit=!1,this.mdl={})},dele:function(e){var t=this;u({username:[e.username]}).then((function(e){t.$refs.table.refresh()})).catch((function(e){})).finally((function(e){t.loading=!1}))}}},k=[{title:"用户名称",dataIndex:"username"},{title:"密码",width:"400px",scopedSlots:{customRender:"password"},needTotal:!0},{title:"操作",scopedSlots:{customRender:"action"}}],E=y,O=(s("8d2e"),Object(b["a"])(E,a,n,!1,null,"ade0f6ce",null));t["default"]=O.exports}}]);