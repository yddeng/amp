{"version":3,"sources":["webpack:///./src/api/kv.js","webpack:///./src/views/db/Flyfish.vue?c5d6","webpack:///./src/views/db/flyfish/Meta.vue?96ed","webpack:///./src/api/flyfish.js","webpack:///src/views/db/flyfish/Meta.vue","webpack:///./src/views/db/flyfish/Meta.vue?df7e","webpack:///./src/views/db/flyfish/Meta.vue","webpack:///./src/views/db/flyfish/SetStatus.vue?8891","webpack:///src/views/db/flyfish/SetStatus.vue","webpack:///./src/views/db/flyfish/SetStatus.vue?c076","webpack:///./src/views/db/flyfish/SetStatus.vue","webpack:///src/views/db/Flyfish.vue","webpack:///./src/views/db/Flyfish.vue?5a87","webpack:///./src/views/db/Flyfish.vue"],"names":["kvApi","kvSet","kvGet","kvDelete","parameter","request","url","method","data","render","_vm","this","_h","$createElement","_c","_self","attrs","tabList","tabActiveKey","handleTabChange","slot","staticStyle","on","handleChange","_l","d","key","title","value","_v","_s","field","deleteKv","disabled","openModel","selectValue","_e","handleOk","model","callback","$$v","visible","expression","span","inputName","inputAddress","staticRenderFns","version","$event","clearDBData","columns","record","index","onPageChange","scopedSlots","_u","fn","text","name","innerColumns","innerData","currentPageIndex","pageSize","modelTitle","form","$set","removeFieldCol","offset","addFieldCol","flyfishApi","getMeta","addTable","addField","getSetStatus","setMarkClear","addSet","remSet","addNode","remNode","addLeaderStoreToNode","removeNodeStore","drainKv","props","host","type","default","dataIndex","customRender","tableName","fields","mounted","watch","val","methods","page","current","then","console","defaultValue","catch","push","splice","tables","component","openAddSetModal","sets","set","markClear","handleSetMarkClear","openAddNodeModal","setID","handleRemSet","nodeColumns","nodes","node","openAddStoreSelect","nodeID","stores","handleAddStore","nodeStoreColumns","isLeader","store","handleRemStore","storeID","storeColumns","storeNodeColumns","addSetModal","handleAddSet","addSetForm","remAddSetFormNodes","addAddSetFormNodes","addNodeModal","handleAddNode","addNodeForm","servicePort","raftPort","addStoreSelectData","addStoreForm","$message","info","handleRemNode","allStores","hasStores","i","j","has","addLearnerStoreToNode","setTimeout","components","Meta","SetStatus","tab","beforeMount","getValue","valueToString","length","s","elem"],"mappings":"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","file":"js/chunk-c14bd2dc.fd364d49.js","sourcesContent":["import request from '@/utils/request'\n\nconst kvApi = {\n  kvSet: 'kv/set',\n  kvGet: 'kv/get',\n  kvDelete: 'kv/delete'\n}\n\nexport function kvSet (parameter) {\n  return request({\n    url: kvApi.kvSet,\n    method: 'post',\n    data: parameter\n  })\n}\n\nexport function kvGet (parameter) {\n  return request({\n    url: kvApi.kvGet,\n    method: 'post',\n    data: parameter\n  })\n}\n\nexport function kvDelete (parameter) {\n  return request({\n    url: kvApi.kvDelete,\n    method: 'post',\n    data: parameter\n  })\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('page-header-wrapper',{attrs:{\"title\":\"Flyfish\",\"breadcrumb\":{},\"tab-list\":_vm.tabList,\"tab-active-key\":_vm.tabActiveKey,\"tab-change\":_vm.handleTabChange}},[_c('template',{slot:\"content\"},[_c('div',{staticStyle:{\"height\":\"40px\",\"width\":\"540px\",\"margin\":\"0 auto\"}},[_c('a-select',{staticStyle:{\"width\":\"300px\"},attrs:{\"show-search\":\"\",\"placeholder\":\"选择Pd地址,加载数据\"},on:{\"change\":_vm.handleChange}},_vm._l((_vm.data),function(d){return _c('a-select-option',{key:d.title,attrs:{\"value\":d.value}},[_vm._v(\" \"+_vm._s(d.field)+\" \")])}),1),_c('a-popconfirm',{attrs:{\"title\":\"确定要删除当前Pd地址吗？\"},on:{\"confirm\":_vm.deleteKv}},[_c('a-button',{staticStyle:{\"color\":\"white\"},attrs:{\"disabled\":_vm.disabled,\"icon\":\"delete\",\"type\":\"danger\"}})],1),_vm._v(\"   \"),_c('a-button',{attrs:{\"type\":\"primary\",\"icon\":\"plus\"},on:{\"click\":_vm.openModel}},[_vm._v(\"新增Pd地址\")])],1)]),(_vm.tabActiveKey==='meta')?_c('a-meta',{attrs:{\"host\":_vm.selectValue}}):(_vm.tabActiveKey==='setStatus')?_c('a-set-status',{attrs:{\"host\":_vm.selectValue}}):_vm._e(),_c('a-modal',{attrs:{\"title\":\"新增\",\"ok-text\":\"确认\",\"cancel-text\":\"取消\"},on:{\"ok\":_vm.handleOk},model:{value:(_vm.visible),callback:function ($$v) {_vm.visible=$$v},expression:\"visible\"}},[_c('a-form-model',{attrs:{\"label-col\":{ span: 4 },\"wrapper-col\":{ span: 18 }}},[_c('a-form-model-item',{attrs:{\"label\":\"名称\"}},[_c('a-input',{attrs:{\"placeholder\":\"input placeholder\"},model:{value:(_vm.inputName),callback:function ($$v) {_vm.inputName=$$v},expression:\"inputName\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"地址\"}},[_c('a-input',{attrs:{\"placeholder\":\"input placeholder\"},model:{value:(_vm.inputAddress),callback:function ($$v) {_vm.inputAddress=$$v},expression:\"inputAddress\"}})],1)],1)],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('a-card',{attrs:{\"bordered\":false}},[_c('div',{staticStyle:{\"marginBottom\":\"24px\"}},[_c('a-row',{attrs:{\"justify\":\"space-between\",\"type\":\"flex\"}},[_c('a-col',[_c('span',{staticStyle:{\"font-size\":\"20px\",\"font-weight\":\"bold\"}},[_vm._v(\"Vsersion: \"+_vm._s(_vm.version))])]),_c('a-col',[_c('a-button',{attrs:{\"type\":\"primary\",\"icon\":\"plus\"},on:{\"click\":function($event){return _vm.openModel('')}}},[_vm._v(\"AddTable\")]),_vm._v(\"  \"),_c('a-popconfirm',{attrs:{\"title\":\"确定要清除所有表吗？\"},on:{\"confirm\":function($event){return _vm.clearDBData('')}}},[_c('a-button',{attrs:{\"type\":\"primary\"}},[_vm._v(\"ClearDBData\")])],1)],1)],1)],1),_c('a-table',{attrs:{\"bordered\":\"\",\"columns\":_vm.columns,\"data-source\":_vm.data,\"size\":\"small\",\"rowKey\":function (record,index) { return index; }},on:{\"change\":_vm.onPageChange},scopedSlots:_vm._u([{key:\"action\",fn:function(text, record){return [_c('div',[_c('a',{on:{\"click\":function($event){return _vm.openModel(record.name)}}},[_vm._v(\"AddField\")]),_c('a-divider',{attrs:{\"type\":\"vertical\"}}),_c('a-popconfirm',{attrs:{\"title\":\"确定要清除当前表吗？\"},on:{\"confirm\":function($event){return _vm.clearDBData(record.name)}}},[_c('a',[_vm._v(\"ClearDBData\")])]),_c('a-divider',{attrs:{\"type\":\"vertical\"}}),_c('a-popconfirm',{attrs:{\"title\":\"确定要删除吗？\"}},[_c('a',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"Delete\")])])],1)]}},{key:\"expandedRowRender\",fn:function(record,index){return _c('a-table',{attrs:{\"bordered\":\"\",\"size\":\"small\",\"columns\":_vm.innerColumns,\"data-source\":_vm.innerData[_vm.currentPageIndex*_vm.pageSize +index],\"pagination\":false,\"rowKey\":function (record,index) { return index; }}},[_c('template',{slot:\"innerAction\"},[_c('div',[_c('a-popconfirm',{attrs:{\"title\":\"确定要删除吗？\"}},[_c('a-icon',{staticStyle:{\"color\":\"red\"},attrs:{\"slot\":\"icon\",\"type\":\"question-circle-o\"},slot:\"icon\"}),_c('a',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"Delete\")])],1)],1)])],2)}}])})],1),_c('a-modal',{attrs:{\"title\":_vm.modelTitle,\"ok-text\":\"确认\",\"cancel-text\":\"取消\",\"width\":800},on:{\"ok\":_vm.handleOk},model:{value:(_vm.visible),callback:function ($$v) {_vm.visible=$$v},expression:\"visible\"}},[_c('a-form-model',{attrs:{\"label-col\":{ span: 4 },\"wrapper-col\":{ span: 18 }}},[_c('a-form-model-item',{attrs:{\"label\":\"TableName\"}},[_c('a-input',{attrs:{\"placeholder\":\"input tableName\",\"disabled\":_vm.disabled},model:{value:(_vm.form.tableName),callback:function ($$v) {_vm.$set(_vm.form, \"tableName\", $$v)},expression:\"form.tableName\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"Fields\"}},[_c('a-row',{staticStyle:{\"background\":\"#F0F0F0\"}},[_c('a-col',{attrs:{\"span\":10}},[_vm._v(\"  FieldName\")]),_c('a-col',{attrs:{\"span\":4}},[_vm._v(\"Type\")]),_c('a-col',{attrs:{\"span\":8}},[_vm._v(\"DefaultValue\")]),_c('a-col',{attrs:{\"span\":2}})],1),_vm._l((_vm.form.fields),function(field,index){return [_c('a-row',{key:index},[_c('a-col',{attrs:{\"span\":10}},[_c('a-input',{staticStyle:{\"width\":\"90%\"},model:{value:(field.name),callback:function ($$v) {_vm.$set(field, \"name\", $$v)},expression:\"field.name\"}})],1),_c('a-col',{attrs:{\"span\":4}},[_c('a-input',{staticStyle:{\"width\":\"90%\"},model:{value:(field.type),callback:function ($$v) {_vm.$set(field, \"type\", $$v)},expression:\"field.type\"}})],1),_c('a-col',{attrs:{\"span\":8}},[_c('a-input',{staticStyle:{\"width\":\"90%\"},model:{value:(field.default),callback:function ($$v) {_vm.$set(field, \"default\", $$v)},expression:\"field.default\"}})],1),_c('a-col',{attrs:{\"span\":2}},[_c('a-icon',{attrs:{\"type\":\"minus-circle-o\"},on:{\"click\":function($event){return _vm.removeFieldCol(index)}}})],1)],1)]})],2),_c('a-form-model-item',{attrs:{\"wrapper-col\":{ span: 18,offset:4}}},[_c('a-button',{staticStyle:{\"width\":\"90%\"},attrs:{\"type\":\"dashed\"},on:{\"click\":_vm.addFieldCol}},[_c('a-icon',{attrs:{\"type\":\"plus\"}}),_vm._v(\" 添加一行 \")],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from '@/utils/request'\n\nconst flyfishApi = {\n  getMeta: 'flyfish/getMeta',\n  addTable: 'flyfish/addTable',\n  addField: 'flyfish/addField',\n  getSetStatus: 'flyfish/getSetStatus'\n}\n\nexport function getMeta (parameter) {\n  return request({\n    url: flyfishApi.getMeta,\n    method: 'post',\n    data: parameter\n  })\n}\n\nexport function addTable (parameter) {\n  return request({\n    url: flyfishApi.addTable,\n    method: 'post',\n    data: parameter\n  })\n}\n\nexport function addField (parameter) {\n  return request({\n    url: flyfishApi.addField,\n    method: 'post',\n    data: parameter\n  })\n}\n\nexport function getSetStatus (parameter) {\n  return request({\n    url: flyfishApi.getSetStatus,\n    method: 'post',\n    data: parameter\n  })\n}\n\nexport function setMarkClear (parameter) {\n  return request({\n    url: '/flyfish/setMarkClear',\n    method: 'post',\n    data: parameter\n  })\n}\n\nexport function addSet (parameter) {\n  return request({\n    url: '/flyfish/addSet',\n    method: 'post',\n    data: parameter\n  })\n}\n\nexport function remSet (parameter) {\n  return request({\n    url: '/flyfish/remSet',\n    method: 'post',\n    data: parameter\n  })\n}\n\nexport function addNode (parameter) {\n  return request({\n    url: '/flyfish/addNode',\n    method: 'post',\n    data: parameter\n  })\n}\n\nexport function remNode (parameter) {\n  return request({\n    url: '/flyfish/remNode',\n    method: 'post',\n    data: parameter\n  })\n}\n\nexport function addLeaderStoreToNode (parameter) {\n  return request({\n    url: '/flyfish/addLeaderStoreToNode',\n    method: 'post',\n    data: parameter\n  })\n}\n\nexport function removeNodeStore (parameter) {\n  return request({\n    url: '/flyfish/removeNodeStore',\n    method: 'post',\n    data: parameter\n  })\n}\n\nexport function clearDBData (parameter) {\n  return request({\n    url: '/flyfish/clearDBData',\n    method: 'post',\n    data: parameter\n  })\n}\n\nexport function drainKv (parameter) {\n  return request({\n    url: '/flyfish/drainKv',\n    method: 'post',\n    data: parameter\n  })\n}\n","<template>\n  <div>\n    <a-card :bordered=\"false\">\n      <div style=\"marginBottom: 24px \" >\n        <a-row\n          justify=\"space-between\"\n          type=\"flex\">\n          <a-col><span style=\"font-size:20px;font-weight:bold\">Vsersion: {{ version }}</span></a-col>\n          <a-col>\n            <a-button\n              type=\"primary\"\n              @click=\"openModel('')\"\n              icon=\"plus\"\n            >AddTable</a-button>&nbsp;\n            <a-popconfirm title=\"确定要清除所有表吗？\" @confirm=\"clearDBData('')\">\n              <a-button\n                type=\"primary\"\n              >ClearDBData</a-button>\n            </a-popconfirm>\n          </a-col>\n        </a-row>\n      </div>\n      <a-table\n        bordered\n        :columns=\"columns\"\n        :data-source=\"data\"\n        size=\"small\"\n        :rowKey=\"(record,index) => index\"\n        @change=\"onPageChange\">\n        <template slot=\"action\" slot-scope=\"text, record\">\n          <div >\n            <a @click=\"openModel(record.name)\">AddField</a>\n            <a-divider type=\"vertical\" />\n            <a-popconfirm title=\"确定要清除当前表吗？\" @confirm=\"clearDBData(record.name)\">\n              <a>ClearDBData</a>\n            </a-popconfirm>\n            <a-divider type=\"vertical\" />\n            <a-popconfirm title=\"确定要删除吗？\">\n              <a style=\"color:red;\">Delete</a>\n            </a-popconfirm>\n          </div>\n        </template>\n        <a-table\n          bordered\n          size=\"small\"\n          slot=\"expandedRowRender\"\n          slot-scope=\"record,index\"\n          :columns=\"innerColumns\"\n          :data-source=\"innerData[currentPageIndex*pageSize +index]\"\n          :pagination=\"false\"\n          :rowKey=\"(record,index) => index\"\n        >\n          <template slot=\"innerAction\" >\n            <div >\n              <a-popconfirm title=\"确定要删除吗？\">\n                <a-icon slot=\"icon\" type=\"question-circle-o\" style=\"color: red\" />\n                <a style=\"color:red;\">Delete</a>\n              </a-popconfirm>\n            </div>\n          </template>\n        </a-table>\n      </a-table>\n    </a-card>\n\n    <a-modal\n      v-model=\"visible\"\n      :title=\"modelTitle\"\n      ok-text=\"确认\"\n      cancel-text=\"取消\"\n      @ok=\"handleOk\"\n      :width=\"800\"\n    >\n\n      <a-form-model\n        :label-col=\"{ span: 4 }\"\n        :wrapper-col=\"{ span: 18 }\">\n        <a-form-model-item label=\"TableName\">\n          <a-input v-model=\"form.tableName\" placeholder=\"input tableName\" :disabled=\"disabled\"/>\n        </a-form-model-item>\n        <a-form-model-item label=\"Fields\">\n          <a-row style=\"background:#F0F0F0\">\n            <a-col :span=\"10\">&nbsp;&nbsp;FieldName</a-col>\n            <a-col :span=\"4\">Type</a-col>\n            <a-col :span=\"8\">DefaultValue</a-col>\n            <a-col :span=\"2\"></a-col>\n          </a-row>\n          <template v-for=\"(field, index) in form.fields\" >\n            <a-row :key=\"index\">\n              <a-col :span=\"10\">\n                <a-input v-model=\"field.name\" style=\"width:90%\"/>\n              </a-col>\n              <a-col :span=\"4\">\n                <a-input v-model=\"field.type\" style=\"width:90%\" />\n              </a-col>\n              <a-col :span=\"8\">\n                <a-input v-model=\"field.default\" style=\"width:90%\"/>\n              </a-col>\n              <a-col :span=\"2\">\n                <a-icon\n                  type=\"minus-circle-o\"\n                  @click=\"removeFieldCol(index)\"\n                />\n              </a-col>\n            </a-row>\n          </template>\n        </a-form-model-item>\n        <a-form-model-item\n          :wrapper-col=\"{ span: 18,offset:4}\"\n        >\n          <a-button type=\"dashed\" style=\"width:90%\" @click=\"addFieldCol\">\n            <a-icon type=\"plus\" /> 添加一行\n          </a-button>\n        </a-form-model-item>\n      </a-form-model>\n    </a-modal>\n  </div>\n</template>\n\n<script>\nimport { getMeta, addTable, addField, clearDBData } from '@/api/flyfish'\n\nexport default {\n  name: 'FlyfishMeta',\n  props: { host: {\n      type: String,\n      default: ''\n    }\n  },\n  data () {\n    return {\n      currentPageIndex: 0,\n      pageSize: 10,\n      data: [],\n      columns: [\n        { title: 'TableName', dataIndex: 'name' },\n        { title: 'Version', dataIndex: 'version' },\n        { title: 'FieldCount', dataIndex: 'fields' },\n        { title: 'Action', scopedSlots: { customRender: 'action' } }\n      ],\n      innerData: [],\n      innerColumns: [\n        { title: 'FieldName', dataIndex: 'name' },\n        { title: 'Version', dataIndex: 'version' },\n        { title: 'Type', dataIndex: 'type' },\n        { title: 'DefaultValue', dataIndex: 'defaultValue' },\n        { title: 'Action', scopedSlots: { customRender: 'innerAction' } }\n      ],\n      version: 0,\n      visible: false,\n      modelTitle: 'AddTable',\n      disabled: false,\n      form: {\n        tableName: '',\n        fields: []\n      }\n    }\n  },\n  mounted () {\n    this.getMeta()\n  },\n  watch: {\n    host (val) {\n      this.getMeta()\n    }\n  },\n  methods: {\n    onPageChange (page) {\n      this.currentPageIndex = page.current - 1\n      this.pageSize = page.pageSize\n    },\n    getMeta () {\n      if (this.host === '') {\n        return ''\n      }\n      getMeta({ host: this.host })\n        .then(res => {\n          console.log(res)\n          const mObj = JSON.parse(res.meta)\n          this.version = mObj.Version\n\n          const data = []\n          const innerData = []\n          for (let i = 0; i < mObj.TableDefs.length; i++) {\n              const table = mObj.TableDefs[i]\n              data.push({\n                key: i,\n                name: table.Name,\n                version: table.Version,\n                fields: table.Fields.length\n              })\n              const fields = []\n              for (let j = 0; j < table.Fields.length; j++) {\n                const field = table.Fields[j]\n                fields.push({\n                  key: j,\n                  name: field.Name,\n                  version: field.TabVersion,\n                  type: field.Type,\n                  defaultValue: field.DefaultValue\n                })\n              }\n              innerData.push(fields)\n          }\n          this.data = data\n          this.innerData = innerData\n        })\n        .catch(e => {\n          this.version = 0\n          this.data = []\n          this.innerData = []\n          })\n    },\n    addFieldCol () {\n      this.form.fields.push({\n        name: '',\n        type: '',\n        default: ''\n      })\n    },\n    removeFieldCol (index) {\n      this.form.fields.splice(index, 1)\n    },\n    openModel (tableName) {\n      console.log('openModel', tableName)\n      this.visible = true\n      this.form = { tableName: '', fields: [] }\n      if (tableName === '') {\n        this.modelTitle = 'AddTable'\n        this.disabled = false\n      } else {\n        this.form.tableName = tableName\n        this.modelTitle = 'AddField'\n        this.disabled = true\n      }\n    },\n    handleOk () {\n      if (this.version === 0) {\n        return ''\n      }\n      const args = {\n        name: this.form.tableName,\n        fields: this.form.fields,\n        version: this.version,\n        host: this.host\n      }\n      console.log(args)\n        if (this.modelTitle === 'AddTable') {\n          addTable(args)\n            .then(res => {\n            this.visible = false\n            this.getMeta()\n          })\n        } else {\n          addField(args)\n            .then(res => {\n            this.visible = false\n            this.getMeta()\n          })\n        }\n    },\n    clearDBData (name) {\n      var tables = []\n      if (name !== '') {\n        tables.push(name)\n      }\n      clearDBData({ host: this.host, clearDBData: { tables: tables } })\n        .then(res => {\n          this.$message.info('操作成功')\n          this.getMeta()\n        })\n    }\n  }\n\n}\n</script>\n\n<style lang=\"less\" scoped>\n\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Meta.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Meta.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Meta.vue?vue&type=template&id=6c51c25f&scoped=true&\"\nimport script from \"./Meta.vue?vue&type=script&lang=js&\"\nexport * from \"./Meta.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6c51c25f\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('a-card',{attrs:{\"bordered\":false}},[_c('div',{staticStyle:{\"marginBottom\":\"24px\"}},[_c('a-row',{attrs:{\"justify\":\"end\",\"type\":\"flex\"}},[_c('a-col',[_c('a-button',{attrs:{\"type\":\"primary\",\"icon\":\"plus\"},on:{\"click\":_vm.openAddSetModal}},[_vm._v(\"AddSet\")]),_vm._v(\"  \"),_c('a-popconfirm',{attrs:{\"title\":\"确定要排空所有Kv吗？\"},on:{\"confirm\":function($event){return _vm.drainKv()}}},[_c('a-button',{attrs:{\"type\":\"primary\"}},[_vm._v(\"DrainKv\")])],1)],1)],1)],1),_c('a-table',{attrs:{\"bordered\":\"\",\"columns\":_vm.columns,\"data-source\":_vm.sets,\"size\":\"small\",\"pagination\":false,\"rowKey\":function (record,index) { return index; }},scopedSlots:_vm._u([{key:\"markClear\",fn:function(set){return [_c('a-switch',{attrs:{\"checked-children\":\"T\",\"un-checked-children\":\"F\",\"checked\":set.markClear},on:{\"change\":function($event){return _vm.handleSetMarkClear(set)}}})]}},{key:\"action\",fn:function(set){return [_c('div',[_c('a',{on:{\"click\":function($event){return _vm.openAddNodeModal(set.setID)}}},[_vm._v(\"AddNode\")]),_c('a-divider',{attrs:{\"type\":\"vertical\"}}),_c('a-popconfirm',{attrs:{\"title\":\"确定要删除吗？\"},on:{\"confirm\":function($event){return _vm.handleRemSet(set.setID)}}},[_c('a-icon',{staticStyle:{\"color\":\"red\"},attrs:{\"slot\":\"icon\",\"type\":\"question-circle-o\"},slot:\"icon\"}),_c('a',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"RemSet\")])],1)],1)]}},{key:\"expandedRowRender\",fn:function(set){return _c('a-tabs',{},[_c('a-tab-pane',{key:\"1\",attrs:{\"tab\":\"KvNode\"}},[_c('a-table',{attrs:{\"bordered\":\"\",\"columns\":_vm.nodeColumns,\"data-source\":set.nodes,\"size\":\"small\",\"pagination\":false,\"rowKey\":function (record,index) { return index; }},scopedSlots:_vm._u([{key:\"nodeAction\",fn:function(node){return [_c('div',[_c('a-select',{staticStyle:{\"width\":\"100px\"},attrs:{\"value\":\"AddStore\"},on:{\"focus\":function($event){return _vm.openAddStoreSelect(set.setID,node.nodeID,set.stores,node.stores)},\"select\":_vm.handleAddStore}},_vm._l((_vm.addStoreSelectData),function(d){return _c('a-select-option',{key:d.value},[_vm._v(\" \"+_vm._s(d.title)+\" \")])}),1)],1)]}},{key:\"expandedRowRender\",fn:function(node){return _c('a-table',{attrs:{\"bordered\":\"\",\"columns\":_vm.nodeStoreColumns,\"data-source\":node.stores,\"size\":\"small\",\"rowKey\":function (record,index) { return index; },\"pagination\":false},scopedSlots:_vm._u([{key:\"nodeStoreIsLeader\",fn:function(isLeader){return [(isLeader)?_c('a-badge',{attrs:{\"status\":\"processing\",\"text\":\"Leader\"}}):_c('a-badge',{attrs:{\"status\":\"default\",\"text\":\"Follower\"}})]}},{key:\"nodeStoreAction\",fn:function(store){return [_c('div',[_c('a-popconfirm',{attrs:{\"title\":\"确定要删除吗？\"},on:{\"confirm\":function($event){return _vm.handleRemStore(set.setID,node.nodeID,store.storeID)}}},[_c('a-icon',{staticStyle:{\"color\":\"red\"},attrs:{\"slot\":\"icon\",\"type\":\"question-circle-o\"},slot:\"icon\"}),_c('a',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"RemStore\")])],1)],1)]}}],null,true)})}}],null,true)})],1),_c('a-tab-pane',{key:\"2\",attrs:{\"tab\":\"Store\"}},[_c('a-table',{attrs:{\"bordered\":\"\",\"columns\":_vm.storeColumns,\"data-source\":set.stores,\"rowKey\":function (record,index) { return index; },\"size\":\"small\",\"pagination\":false},scopedSlots:_vm._u([{key:\"expandedRowRender\",fn:function(store){return _c('a-table',{attrs:{\"bordered\":\"\",\"columns\":_vm.storeNodeColumns,\"data-source\":store.nodes,\"rowKey\":function (record,index) { return index; },\"size\":\"small\",\"pagination\":false},scopedSlots:_vm._u([{key:\"storeNodeIsLeader\",fn:function(isLeader){return [(isLeader)?_c('a-badge',{attrs:{\"status\":\"processing\",\"text\":\"Leader\"}}):_c('a-badge',{attrs:{\"status\":\"default\",\"text\":\"Follower\"}})]}}],null,true)},[_c('template',{slot:\"storeNodeAction\"})],2)}}],null,true)},[_c('template',{slot:\"storeAction\"})],2)],1)],1)}}])})],1),_c('a-modal',{attrs:{\"visible\":_vm.addSetModal,\"title\":\"AddSet\",\"width\":1000},on:{\"ok\":_vm.handleAddSet,\"cancel\":function (){ return _vm.addSetModal = false; }}},[_c('a-form-model',{attrs:{\"label-col\":{ span: 4 },\"wrapper-col\":{ span: 18 }}},[_c('a-form-model-item',{attrs:{\"label\":\"SetID\"}},[_c('a-input-number',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"input SetID\"},model:{value:(_vm.addSetForm.setID),callback:function ($$v) {_vm.$set(_vm.addSetForm, \"setID\", $$v)},expression:\"addSetForm.setID\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"Nodes\"}},[_c('a-row',{staticStyle:{\"background\":\"#F0F0F0\"}},[_c('a-col',{attrs:{\"span\":4}},[_vm._v(\"  NodeID\")]),_c('a-col',{attrs:{\"span\":10}},[_vm._v(\"Host\")]),_c('a-col',{attrs:{\"span\":4}},[_vm._v(\"ServicePort\")]),_c('a-col',{attrs:{\"span\":4}},[_vm._v(\"RaftPort\")]),_c('a-col',{attrs:{\"span\":2}})],1),_vm._l((_vm.addSetForm.nodes),function(node,index){return [_c('a-row',{key:index},[_c('a-col',{attrs:{\"span\":4}},[_c('a-input-number',{staticStyle:{\"width\":\"90%\"},model:{value:(node.nodeID),callback:function ($$v) {_vm.$set(node, \"nodeID\", $$v)},expression:\"node.nodeID\"}})],1),_c('a-col',{attrs:{\"span\":10}},[_c('a-input',{staticStyle:{\"width\":\"90%\"},model:{value:(node.host),callback:function ($$v) {_vm.$set(node, \"host\", $$v)},expression:\"node.host\"}})],1),_c('a-col',{attrs:{\"span\":4}},[_c('a-input-number',{staticStyle:{\"width\":\"90%\"},model:{value:(node.servicePort),callback:function ($$v) {_vm.$set(node, \"servicePort\", $$v)},expression:\"node.servicePort\"}})],1),_c('a-col',{attrs:{\"span\":4}},[_c('a-input-number',{staticStyle:{\"width\":\"90%\"},model:{value:(node.raftPort),callback:function ($$v) {_vm.$set(node, \"raftPort\", $$v)},expression:\"node.raftPort\"}})],1),_c('a-col',{attrs:{\"span\":2}},[_c('a-icon',{attrs:{\"type\":\"minus-circle-o\"},on:{\"click\":function($event){return _vm.remAddSetFormNodes(index)}}})],1)],1)]})],2),_c('a-form-model-item',{attrs:{\"wrapper-col\":{ span: 18,offset:4}}},[_c('a-button',{staticStyle:{\"width\":\"90%\"},attrs:{\"type\":\"dashed\"},on:{\"click\":_vm.addAddSetFormNodes}},[_c('a-icon',{attrs:{\"type\":\"plus\"}}),_vm._v(\" 添加一行 \")],1)],1)],1)],1),_c('a-modal',{attrs:{\"visible\":_vm.addNodeModal,\"title\":\"AddNode\",\"width\":800},on:{\"ok\":_vm.handleAddNode,\"cancel\":function (){ return _vm.addNodeModal = false; }}},[_c('a-form-model',{attrs:{\"label-col\":{ span: 4 },\"wrapper-col\":{ span: 18 }}},[_c('a-form-model-item',{attrs:{\"label\":\"SetID\"}},[_c('a-input-number',{staticStyle:{\"width\":\"100%\"},attrs:{\"disabled\":\"\"},model:{value:(_vm.addNodeForm.setID),callback:function ($$v) {_vm.$set(_vm.addNodeForm, \"setID\", $$v)},expression:\"addNodeForm.setID\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"NodeID\"}},[_c('a-input-number',{staticStyle:{\"width\":\"100%\"},model:{value:(_vm.addNodeForm.nodeID),callback:function ($$v) {_vm.$set(_vm.addNodeForm, \"nodeID\", $$v)},expression:\"addNodeForm.nodeID\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"Host\"}},[_c('a-input',{staticStyle:{\"width\":\"100%\"},model:{value:(_vm.addNodeForm.host),callback:function ($$v) {_vm.$set(_vm.addNodeForm, \"host\", $$v)},expression:\"addNodeForm.host\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"ServicePort\"}},[_c('a-input-number',{staticStyle:{\"width\":\"100%\"},model:{value:(_vm.addNodeForm.servicePort),callback:function ($$v) {_vm.$set(_vm.addNodeForm, \"servicePort\", $$v)},expression:\"addNodeForm.servicePort\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"RaftPort\"}},[_c('a-input-number',{staticStyle:{\"width\":\"100%\"},model:{value:(_vm.addNodeForm.raftPort),callback:function ($$v) {_vm.$set(_vm.addNodeForm, \"raftPort\", $$v)},expression:\"addNodeForm.raftPort\"}})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <a-card :bordered=\"false\">\n      <div style=\"marginBottom: 24px \" >\n        <a-row justify=\"end\" type=\"flex\">\n          <a-col>\n            <a-button type=\"primary\" icon=\"plus\" @click=\"openAddSetModal\">AddSet</a-button>&nbsp;\n            <a-popconfirm title=\"确定要排空所有Kv吗？\" @confirm=\"drainKv()\">\n              <a-button\n                type=\"primary\"\n              >DrainKv</a-button>\n            </a-popconfirm>\n          </a-col>\n        </a-row>\n      </div>\n      <a-table\n        bordered\n        :columns=\"columns\"\n        :data-source=\"sets\"\n        size=\"small\"\n        :pagination=\"false\"\n        :rowKey=\"(record,index) => index\"\n      >\n        <template slot=\"markClear\" slot-scope=\"set\">\n          <a-switch checked-children=\"T\" un-checked-children=\"F\" :checked=\"set.markClear\" @change=\"handleSetMarkClear(set)\" />\n        </template>\n        <template slot=\"action\" slot-scope=\"set\">\n          <div >\n            <a @click=\"openAddNodeModal(set.setID)\">AddNode</a>\n            <a-divider type=\"vertical\" />\n            <a-popconfirm title=\"确定要删除吗？\" @confirm=\"handleRemSet(set.setID)\" >\n              <a-icon slot=\"icon\" type=\"question-circle-o\" style=\"color: red\" />\n              <a style=\"color:red;\">RemSet</a>\n            </a-popconfirm>\n          </div>\n        </template>\n\n        <a-tabs\n          slot=\"expandedRowRender\"\n          slot-scope=\"set\"\n        >\n          <a-tab-pane key=\"1\" tab=\"KvNode\">\n            <a-table\n              bordered\n              :columns=\"nodeColumns\"\n              :data-source=\"set.nodes\"\n              size=\"small\"\n              :pagination=\"false\"\n              :rowKey=\"(record,index) => index\"\n            >\n              <template slot=\"nodeAction\" slot-scope=\"node\" >\n                <div >\n                  <a-select\n                    style=\"width: 100px\"\n                    value=\"AddStore\"\n                    @focus=\"openAddStoreSelect(set.setID,node.nodeID,set.stores,node.stores)\"\n                    @select=\"handleAddStore\"\n                  >\n                    <a-select-option v-for=\"d in addStoreSelectData\" :key=\"d.value\">\n                      {{ d.title }}\n                    </a-select-option>\n                  </a-select>\n                </div>\n              </template>\n\n              <a-table\n                bordered\n                slot=\"expandedRowRender\"\n                slot-scope=\"node\"\n                :columns=\"nodeStoreColumns\"\n                :data-source=\"node.stores\"\n                size=\"small\"\n                :rowKey=\"(record,index) => index\"\n                :pagination=\"false\"\n              >\n                <template slot=\"nodeStoreIsLeader\" slot-scope=\"isLeader\">\n                  <a-badge v-if=\"isLeader\" status=\"processing\" text=\"Leader\" />\n                  <a-badge v-else status=\"default\" text=\"Follower\" />\n                </template>\n                <template slot=\"nodeStoreAction\" slot-scope=\"store\" >\n                  <div >\n                    <a-popconfirm title=\"确定要删除吗？\" @confirm=\"handleRemStore(set.setID,node.nodeID,store.storeID)\">\n                      <a-icon slot=\"icon\" type=\"question-circle-o\" style=\"color: red\" />\n                      <a style=\"color:red;\">RemStore</a>\n                    </a-popconfirm>\n                  </div>\n                </template>\n              </a-table>\n\n            </a-table>\n          </a-tab-pane>\n          <a-tab-pane key=\"2\" tab=\"Store\">\n            <a-table\n              bordered\n              :columns=\"storeColumns\"\n              :data-source=\"set.stores\"\n              :rowKey=\"(record,index) => index\"\n              size=\"small\"\n              :pagination=\"false\"\n            >\n              <template slot=\"storeAction\" >\n              </template>\n\n              <a-table\n                bordered\n                slot=\"expandedRowRender\"\n                slot-scope=\"store\"\n                :columns=\"storeNodeColumns\"\n                :data-source=\"store.nodes\"\n                :rowKey=\"(record,index) => index\"\n                size=\"small\"\n                :pagination=\"false\"\n              >\n                <template slot=\"storeNodeIsLeader\" slot-scope=\"isLeader\">\n                  <a-badge v-if=\"isLeader\" status=\"processing\" text=\"Leader\" />\n                  <a-badge v-else status=\"default\" text=\"Follower\" />\n                </template>\n                <template slot=\"storeNodeAction\" >\n\n                </template>\n              </a-table>\n\n            </a-table>\n          </a-tab-pane>\n        </a-tabs>\n      </a-table>\n    </a-card>\n\n    <a-modal\n      :visible=\"addSetModal\"\n      title=\"AddSet\"\n      @ok=\"handleAddSet\"\n      @cancel=\"()=> addSetModal = false\"\n      :width=\"1000\"\n    >\n      <a-form-model\n        :label-col=\"{ span: 4 }\"\n        :wrapper-col=\"{ span: 18 }\">\n        <a-form-model-item label=\"SetID\">\n          <a-input-number v-model=\"addSetForm.setID\" placeholder=\"input SetID\" style=\"width:100%\"/>\n        </a-form-model-item>\n        <a-form-model-item label=\"Nodes\">\n          <a-row style=\"background:#F0F0F0\">\n            <a-col :span=\"4\">&nbsp;&nbsp;NodeID</a-col>\n            <a-col :span=\"10\">Host</a-col>\n            <a-col :span=\"4\">ServicePort</a-col>\n            <a-col :span=\"4\">RaftPort</a-col>\n            <a-col :span=\"2\"></a-col>\n          </a-row>\n          <template v-for=\"(node, index) in addSetForm.nodes\" >\n            <a-row :key=\"index\">\n              <a-col :span=\"4\">\n                <a-input-number v-model=\"node.nodeID\" style=\"width:90%\"/>\n              </a-col>\n              <a-col :span=\"10\">\n                <a-input v-model=\"node.host\" style=\"width:90%\" />\n              </a-col>\n              <a-col :span=\"4\">\n                <a-input-number v-model=\"node.servicePort\" style=\"width:90%\"/>\n              </a-col>\n              <a-col :span=\"4\">\n                <a-input-number v-model=\"node.raftPort\" style=\"width:90%\"/>\n              </a-col>\n              <a-col :span=\"2\">\n                <a-icon\n                  type=\"minus-circle-o\"\n                  @click=\"remAddSetFormNodes(index)\"\n                />\n              </a-col>\n            </a-row>\n          </template>\n        </a-form-model-item>\n        <a-form-model-item\n          :wrapper-col=\"{ span: 18,offset:4}\"\n        >\n          <a-button type=\"dashed\" style=\"width:90%\" @click=\"addAddSetFormNodes\">\n            <a-icon type=\"plus\" /> 添加一行\n          </a-button>\n        </a-form-model-item>\n      </a-form-model>\n    </a-modal>\n    <a-modal\n      :visible=\"addNodeModal\"\n      title=\"AddNode\"\n      @ok=\"handleAddNode\"\n      @cancel=\"()=> addNodeModal = false\"\n      :width=\"800\"\n    >\n      <a-form-model\n        :label-col=\"{ span: 4 }\"\n        :wrapper-col=\"{ span: 18 }\">\n        <a-form-model-item label=\"SetID\">\n          <a-input-number v-model=\"addNodeForm.setID\" style=\"width:100%\" disabled/>\n        </a-form-model-item>\n        <a-form-model-item label=\"NodeID\">\n          <a-input-number v-model=\"addNodeForm.nodeID\" style=\"width:100%\"/>\n        </a-form-model-item>\n        <a-form-model-item label=\"Host\">\n          <a-input v-model=\"addNodeForm.host\" style=\"width:100%\"/>\n        </a-form-model-item>\n        <a-form-model-item label=\"ServicePort\">\n          <a-input-number v-model=\"addNodeForm.servicePort\" style=\"width:100%\"/>\n        </a-form-model-item>\n        <a-form-model-item label=\"RaftPort\">\n          <a-input-number v-model=\"addNodeForm.raftPort\" style=\"width:100%\"/>\n        </a-form-model-item>\n      </a-form-model>\n    </a-modal>\n  </div>\n</template>\n\n<script>\nimport { getSetStatus,\n  setMarkClear,\n  addSet,\n  remSet,\n  addNode,\n  remNode,\n  addLeaderStoreToNode,\n  removeNodeStore, drainKv\n} from '@/api/flyfish'\nexport default {\n  name: 'FlyfishSetStatus',\n   props: { host: {\n      type: String,\n      default: ''\n    }\n  },\n  data () {\n    return {\n      columns: [\n        { title: 'SetID', dataIndex: 'setID' },\n        { title: 'KvCount', dataIndex: 'kvcount' },\n        { title: 'MarkClear', scopedSlots: { customRender: 'markClear' } },\n        { title: 'NodeCount', customRender: (record) => record.nodes.length },\n        { title: 'StoreCount', customRender: (record) => record.stores.length },\n        { title: 'Action', scopedSlots: { customRender: 'action' } }\n      ],\n      nodeColumns: [\n        { title: 'NodeID', dataIndex: 'nodeID' },\n        { title: 'StoreCount', customRender: (record) => record.stores.length },\n        { title: 'Action', scopedSlots: { customRender: 'nodeAction' } }\n      ],\n      nodeStoreColumns: [\n        { title: 'StoreID', dataIndex: 'storeID' },\n        { title: 'Type', dataIndex: 'type' },\n        { title: 'Value', dataIndex: 'value' },\n        { title: 'Progress', dataIndex: 'progress' },\n        { title: 'IsLeader', dataIndex: 'isLeader', scopedSlots: { customRender: 'nodeStoreIsLeader' } },\n        { title: 'Action', scopedSlots: { customRender: 'nodeStoreAction' } }\n      ],\n      storeColumns: [\n        { title: 'StoreID', dataIndex: 'storeID' },\n        { title: 'KvCount', dataIndex: 'kvcount' },\n        { title: 'NodeCount', customRender: (record) => record.nodes.length },\n        { title: 'Action', scopedSlots: { customRender: 'storeAction' } }\n      ],\n      storeNodeColumns: [\n        { title: 'NodeID', dataIndex: 'nodeID' },\n        { title: 'IsLeader', dataIndex: 'isLeader', scopedSlots: { customRender: 'storeNodeIsLeader' } },\n        { title: 'Action', scopedSlots: { customRender: 'storeNodeAction' } }\n      ],\n      sets: [],\n      addSetModal: false,\n      addSetForm: {\n        setID: 0,\n        nodes: []\n      },\n      addNodeModal: false,\n      addNodeForm: {\n        setID: 0,\n        nodeID: 0,\n        host: '',\n        servicePort: 0,\n        raftPort: 0\n      },\n      addStoreSelectData: [],\n      addStoreForm: {\n        setID: 0,\n        nodeID: 0,\n        store: 0\n      }\n    }\n  },\n  mounted () {\n    this.getSetStatus()\n  },\n  watch: {\n    host (val) {\n      this.getSetStatus()\n    }\n  },\n  methods: {\n    getSetStatus () {\n    if (this.host === '') {\n      return ''\n    }\n    getSetStatus({ host: this.host })\n      .then(res => {\n        this.sets = res.sets\n        console.log(this.sets)\n        this.sets.sort((a, b) => (a.setID - b.setID))\n        for (let i = 0; i < this.sets.length; i++) {\n          const set = this.sets[i]\n          set.stores.sort((a, b) => (a.storeID - b.storeID))\n          for (let si = 0; si < set.stores.length; si++) {\n            set.stores[si].nodes = []\n          }\n          set.nodes.sort((a, b) => (a.nodeID - b.nodeID))\n          for (let j = 0; j < set.nodes.length; j++) {\n            const node = set.nodes[j]\n            if (!node.stores) {\n              node.stores = []\n            }\n            node.stores.sort((a, b) => (a.storeID - b.storeID))\n            for (let k = 0; k < node.stores.length; k++) {\n              const store = node.stores[k]\n              for (let si = 0; si < set.stores.length; si++) {\n                if (set.stores[si].storeID === store.storeID) {\n                  set.stores[si].nodes.push({\n                    nodeID: node.nodeID,\n                    isLeader: store.isLeader\n                  })\n                  break\n                }\n              }\n            }\n          }\n        }\n        console.log(this.sets)\n      })\n      .catch(e => {\n        this.sets = []\n      })\n    },\n    handleSetMarkClear (set) {\n      if (this.host === '' || set.markClear) {\n        this.$message.info('不允许操作', 1)\n        return ''\n      }\n      console.log(set)\n      setMarkClear({ host: this.host, setMarkClear: { setID: set.setID } })\n        .then(res => {\n            set.markClear = true\n        })\n    },\n    openAddSetModal () {\n      this.addSetForm = { setID: 0, nodes: [] }\n      this.addSetModal = true\n    },\n    addAddSetFormNodes () {\n      this.addSetForm.nodes.push({\n        nodeID: 0,\n        host: '',\n        servicePort: 0,\n        raftPort: 0\n      })\n    },\n    remAddSetFormNodes (index) {\n      this.addSetForm.nodes.splice(index, 1)\n    },\n    handleAddSet () {\n      console.log('addSet', this.addSetForm)\n      if (this.host === '') {\n        this.$message.info('请选择Pd节点', 1)\n        return ''\n      }\n\n      addSet({ host: this.host, addSet: { set: this.addSetForm } })\n        .then(res => {\n          this.addSetModal = false\n          this.getSetStatus()\n        })\n        .catch(e => {\n          this.addSetModal = false\n        })\n    },\n    handleRemSet (setID) {\n      console.log('remSet', setID)\n      if (this.host === '') {\n        this.$message.info('请选择Pd节点', 1)\n        return ''\n      }\n      remSet({ host: this.host, remSet: { setID: setID } })\n        .then(res => {\n          this.getSetStatus()\n        })\n    },\n    openAddNodeModal (setID) {\n      this.addNodeForm = { setID: setID, nodeID: 0, host: '', servicePort: 0, raftPort: 0 }\n      this.addNodeModal = true\n    },\n    handleAddNode () {\n      console.log('addNode', this.addNodeForm)\n      if (this.host === '') {\n        this.$message.info('请选择Pd节点', 1)\n        return ''\n      }\n      addNode({ host: this.host, addNode: this.addNodeForm })\n        .then(res => {\n          this.addNodeModal = false\n          this.getSetStatus()\n        })\n        .catch(e => {\n          this.addNodeModal = false\n        })\n    },\n    handleRemNode (setID, nodeID) {\n      console.log('remnode', setID, nodeID)\n      if (this.host === '') {\n        this.$message.info('请选择Pd节点', 1)\n        return ''\n      }\n      remNode({ host: this.host, remNode: { setID: setID, nodeID: nodeID } })\n        .then(res => {\n          this.getSetStatus()\n        })\n    },\n    openAddStoreSelect (setID, nodeID, allStores, hasStores) {\n      this.addStoreForm.setID = setID\n      this.addStoreForm.nodeID = nodeID\n      this.addStoreSelectData = []\n      for (let i = 0; i < allStores.length; i++) {\n        let has = false\n        for (let j = 0; j < hasStores.length; j++) {\n          if (allStores[i].storeID === hasStores[j].storeID) {\n            has = true\n            break\n          }\n        }\n        if (!has) {\n          this.addStoreSelectData.push({\n            title: 'Store ' + allStores[i].storeID,\n            value: allStores[i].storeID\n          })\n        }\n      }\n    },\n    handleAddStore (value) {\n      this.addStoreForm.store = value\n      console.log(this.addStoreForm)\n      if (this.host === '') {\n        this.$message.info('请选择Pd节点', 1)\n        return ''\n      }\n      addLeaderStoreToNode({ host: this.host, addLearnerStoreToNode: this.addStoreForm })\n        .then(res => {\n          this.getSetStatus()\n        })\n    },\n    handleRemStore (setID, nodeID, storeID) {\n      const arg = { setID: setID, nodeID: nodeID, store: storeID }\n      console.log(arg)\n      if (this.host === '') {\n        this.$message.info('请选择Pd节点', 1)\n        return ''\n      }\n\n      removeNodeStore({ host: this.host, removeNodeStore: arg })\n        .then(res => {\n          this.getSetStatus()\n        })\n    },\n    drainKv () {\n      drainKv({ host: this.host })\n          .then(res => {\n            this.$message.info('操作成功')\n            setTimeout(() => {\n              this.getSetStatus()\n            }, 1500)\n          })\n      }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SetStatus.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SetStatus.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SetStatus.vue?vue&type=template&id=32e5b9bf&scoped=true&\"\nimport script from \"./SetStatus.vue?vue&type=script&lang=js&\"\nexport * from \"./SetStatus.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"32e5b9bf\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <page-header-wrapper\n    title=\"Flyfish\"\n    :breadcrumb=\"{}\"\n    :tab-list=\"tabList\"\n    :tab-active-key=\"tabActiveKey\"\n    :tab-change=\"handleTabChange\"\n  >\n    <template slot=\"content\">\n      <div style=\"height: 40px;width:540px;margin:0 auto;\">\n        <a-select\n          show-search\n          placeholder=\"选择Pd地址,加载数据\"\n          style=\"width: 300px\"\n          @change=\"handleChange\"\n        >\n          <a-select-option v-for=\"d in data\" :key=\"d.title\" :value=\"d.value\">\n            {{ d.field }}\n          </a-select-option>\n        </a-select>\n        <a-popconfirm\n          title=\"确定要删除当前Pd地址吗？\"\n          @confirm=\"deleteKv\">\n          <a-button :disabled=\"disabled\" icon=\"delete\" type=\"danger\" style=\"color: white\" />\n        </a-popconfirm>\n        &nbsp; <a-button type=\"primary\" icon=\"plus\" @click=\"openModel\">新增Pd地址</a-button>\n      </div>\n    </template>\n\n    <a-meta v-if=\"tabActiveKey==='meta'\" :host=\"selectValue\"></a-meta>\n    <a-set-status v-else-if=\"tabActiveKey==='setStatus'\" :host=\"selectValue\"></a-set-status>\n\n    <a-modal v-model=\"visible\" title=\"新增\" ok-text=\"确认\" cancel-text=\"取消\" @ok=\"handleOk\">\n      <a-form-model\n        :label-col=\"{ span: 4 }\"\n        :wrapper-col=\"{ span: 18 }\">\n        <a-form-model-item label=\"名称\">\n          <a-input v-model=\"inputName\" placeholder=\"input placeholder\" />\n        </a-form-model-item>\n        <a-form-model-item label=\"地址\">\n          <a-input v-model=\"inputAddress\" placeholder=\"input placeholder\" />\n        </a-form-model-item>\n      </a-form-model>\n    </a-modal>\n  </page-header-wrapper>\n</template>\n\n<script>\nimport { kvSet, kvGet, kvDelete } from '@/api/kv'\nimport Meta from './flyfish/Meta'\nimport SetStatus from './flyfish/SetStatus'\n\nexport default {\n  name: 'Flyfish',\n  components: {\n    'a-meta': Meta,\n    'a-set-status': SetStatus\n  },\n  data () {\n    return {\n      key: 'fly_pd',\n      data: [],\n      selectValue: '',\n      tabList: [\n        { key: 'meta', tab: 'Meta' },\n        { key: 'setStatus', tab: 'SetStatus' }\n      ],\n      tabActiveKey: 'meta',\n      visible: false,\n      inputName: '',\n      inputAddress: '',\n      disabled: true\n    }\n  },\n  beforeMount () {\n    this.getValue()\n  },\n  methods: {\n    getValue () {\n      kvGet({ key: this.key })\n        .then(res => {\n          console.log(res)\n          this.selectValue = ''\n          if (res.exist) {\n            this.data = []\n            const vals = res.value.split(';')\n            for (const idx in vals) {\n              const field = vals[idx]\n              const fs = field.split('@')\n              const k = fs[0]\n              const v = fs[1]\n              this.data.push({ title: k, value: v, field: field })\n            }\n          }\n       })\n    },\n    valueToString () {\n      if (this.data.length === 0) {\n        return ''\n      } else if (this.data.length === 1) {\n        return this.data[0].field\n      } else {\n        let s = this.data[0].field\n        for (let i = 1; i < this.data.length; i++) {\n          s += ';' + this.data[i].field\n        }\n        return s\n      }\n    },\n    deleteKv () {\n      let index = -1\n      for (let i = 0; i < this.data.length; i++) {\n        const elem = this.data[i]\n        if (elem.value === this.selectValue) {\n          index = i\n        }\n      }\n      if (index !== -1) {\n        this.data.splice(index, 1)\n      }\n      // console.log(this.selectValue, index)\n      if (this.data.length === 0) {\n        kvDelete({ key: this.key })\n        .then(res => {\n          this.getValue()\n        })\n      } else {\n        const value = this.valueToString()\n        kvSet({ key: this.key, value: value })\n        .then(res => {\n          this.getValue()\n        })\n      }\n    },\n    handleChange (value) {\n      this.selectValue = value\n      if (this.selectValue === '') {\n        this.disabled = true\n      } else {\n        this.disabled = false\n      }\n    },\n    openModel () {\n      this.inputName = ''\n      this.inputAddress = ''\n      this.visible = true\n    },\n    handleOk () {\n      // console.log(this.inputName, this.inputAddress)\n      if (this.inputName !== '' && this.inputAddress !== '') {\n        let index = -1\n        for (let i = 0; i < this.data.length; i++) {\n          const elem = this.data[i]\n          if (elem.title === this.inputName) {\n            elem.value = this.inputAddress\n            elem.field = this.inputName + '@' + this.inputAddress\n            index = i\n          }\n        }\n        if (index === -1) {\n          this.data.push({ title: this.inputName, value: this.inputAddress, field: this.inputName + '@' + this.inputAddress })\n        }\n        const value = this.valueToString()\n        kvSet({ key: this.key, value: value })\n        .then(res => {\n          this.visible = false\n          this.getValue()\n        })\n      } else {\n        this.visible = false\n      }\n    },\n    handleTabChange (key) {\n     this.tabActiveKey = key\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Flyfish.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Flyfish.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Flyfish.vue?vue&type=template&id=1b6ea979&scoped=true&\"\nimport script from \"./Flyfish.vue?vue&type=script&lang=js&\"\nexport * from \"./Flyfish.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1b6ea979\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}