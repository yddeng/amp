(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e4007a9"],{"328a":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{attrs:{bordered:!1,size:"small"}},[a("a-descriptions",{attrs:{title:"执行信息"}},[a("a-descriptions-item",{attrs:{label:"命令名称"}},[t._v(t._s(t.cmdName))]),a("a-descriptions-item",{attrs:{label:"执行ID"}},[t._v(t._s(t.record.id))]),a("a-descriptions-item",{attrs:{label:"执行用户"}},[t._v(t._s(t.record.user))])],1),a("a-descriptions",[a("a-descriptions-item",{attrs:{label:"状态"}},[t.record.result_at>0?a("span",{staticStyle:{color:"#3CB371"}},[t._v("已完成")]):a("span",{staticStyle:{color:"#48D1CC"}},[t._v("执行中")])]),a("a-descriptions-item",{attrs:{label:"创建时间"}},[t._v(t._s(t._f("formatDate")(t.record.create_at)))]),t.record.result_at>0?a("a-descriptions-item",{attrs:{label:"执行时长"}},[t._v(t._s(t.record.result_at-t.record.create_at)+" 秒")]):t._e()],1),a("a-descriptions",[a("a-descriptions-item",{attrs:{label:"执行节点"}},[t._v(t._s(t.record.node))]),a("a-descriptions-item",{attrs:{label:"执行目录"}},[t._v('"'+t._s(t.record.dir)+'"')])],1),a("a-divider",{staticStyle:{"margin-bottom":"12px"}}),a("a-descriptions",{attrs:{title:"脚本内容"}},[a("div",[a("a-textarea",{staticStyle:{background:"#0e0e0e",color:"white"},attrs:{value:t.record.context,"auto-size":{minRows:4,maxRows:10}}})],1)]),a("a-divider",{staticStyle:{"margin-bottom":"12px"}}),a("a-descriptions",{attrs:{title:"执行结果"}},[a("div",[a("a-textarea",{staticStyle:{background:"#0e0e0e",color:"white"},attrs:{value:t.record.result,"auto-size":{minRows:4,maxRows:10}}})],1)])],1)},o=[],n=a("c1df"),c=a.n(n),i={name:"LogInfo",components:{moment:c.a},props:{cmdName:{type:String,default:"null"},record:{type:Object,default:null}},data:function(){return{}},filters:{formatDate:function(t){return c.a.unix(t).format("YYYY-MM-DD HH:mm:ss")}},mounted:function(){},methods:{}},s=i,d=a("2877"),l=Object(d["a"])(s,r,o,!1,null,null,null);e["a"]=l.exports},a398:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-header-wrapper",{attrs:{breadcrumb:{},title:"执行命令",content:"( "+t.cmdName+" )"},on:{back:function(){return t.$router.go(-1)}}},[a("a-card",{attrs:{bordered:!1}},[a("s-table",{ref:"table",attrs:{rowKey:"id",size:"middle",bordered:t.border,"data-name":"logList",columns:t.columns,handleMethods:t.handleDataList,data:t.loadData},scopedSlots:t._u([{key:"context",fn:function(e){return[e.length>30?a("a-tooltip",{staticStyle:{color:"#00BFFF"},attrs:{title:e}},[t._v(" "+t._s(e.slice(0,30)+"...")+" ")]):a("a-tooltip",{staticStyle:{color:"#00BFFF"},attrs:{title:e}},[t._v(" "+t._s(e)+" ")]),a("a-tooltip",[a("template",{slot:"title"},[t._v(t._s(t.copyTitle))]),a("a-icon",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e,expression:"text",arg:"copy"}],attrs:{type:"copy"},on:{click:t.copyClick}})],2)]}},{key:"statue",fn:function(e,r){return[r.result_at>0?a("span",{staticStyle:{color:"#3CB371"}},[t._v("已完成")]):a("span",{staticStyle:{color:"#48D1CC"}},[t._v("执行中")])]}},{key:"action",fn:function(e,r){return[a("div",[a("a",{on:{click:function(e){return t.showLogInfo(r)}}},[t._v("查看详情")])])]}}])})],1)],1)},o=[],n=a("5530"),c=(a("b0c0"),a("d81d"),a("c1df")),i=a.n(c),s=a("2af9"),d=a("bb62"),l=a("328a"),u=[{title:"执行ID",dataIndex:"id"},{title:"执行内容",dataIndex:"context",scopedSlots:{customRender:"context"}},{title:"执行时间",dataIndex:"create_at",customRender:function(t){return i.a.unix(t).format("YYYY-MM-DD HH:mm:ss")}},{title:"执行用户",dataIndex:"user",ellipsis:!0},{title:"状态",scopedSlots:{customRender:"statue"}},{title:"操作",scopedSlots:{customRender:"action"}}],m={name:"CmdLog",components:{STable:s["a"]},data:function(){var t=this;return{columns:u,cmdName:"",border:!1,loadData:function(e){var a=Object(n["a"])({id:t.$route.params.id},e);return Object(d["e"])(a).then((function(t){return t}))},copyTitle:"复制"}},mounted:function(){this.$route.params.name?this.cmdName=this.$route.params.name:this.$router.back()},methods:{handleDataList:function(t){var e=t.map((function(t){return Object(n["a"])({},t)}));return e},showLogInfo:function(t){this.$dialog(l["a"],{cmdName:this.cmdName,record:t},{title:"执行日志",width:1e3,centered:!0,maskClosable:!0})},copyClick:function(){var t=this;this.copyTitle="复制成功",setTimeout((function(){t.copyTitle="复制"}),1500)}}},p=m,f=a("2877"),b=Object(f["a"])(p,r,o,!1,null,"0e3bf0bb",null);e["default"]=b.exports},bb62:function(t,e,a){"use strict";a.d(e,"d",(function(){return n})),a.d(e,"a",(function(){return c})),a.d(e,"b",(function(){return i})),a.d(e,"f",(function(){return s})),a.d(e,"c",(function(){return d})),a.d(e,"e",(function(){return l}));var r=a("b775"),o={cmdList:"cmd/list",cmdCreate:"cmd/create",cmdDelete:"cmd/delete",cmdUpdate:"cmd/update",cmdExec:"cmd/exec",cmdLog:"cmd/log"};function n(t){return Object(r["b"])({url:o.cmdList,method:"post",data:t})}function c(t){return Object(r["b"])({url:o.cmdCreate,method:"post",data:t})}function i(t){return Object(r["b"])({url:o.cmdDelete,method:"post",data:t})}function s(t){return Object(r["b"])({url:o.cmdUpdate,method:"post",data:t})}function d(t,e){return Object(r["b"])({url:o.cmdExec,method:"post",timeout:t,data:e})}function l(t){return Object(r["b"])({url:o.cmdLog,method:"post",data:t})}}}]);