{"version":3,"sources":["webpack:///./src/views/user/Login.vue?4f2e","webpack:///./src/views/user/Login.vue?4de0","webpack:///./src/utils/util.js","webpack:///src/views/user/Login.vue","webpack:///./src/views/user/Login.vue?5369","webpack:///./src/views/user/Login.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","form","on","handleSubmit","customActiveKey","textAlign","borderBottom","handleTabClick","key","staticStyle","loginErrorMsg","_e","directives","name","rawName","value","rules","required","message","validateTrigger","expression","style","color","slot","valuePropName","_v","state","loginBtn","staticRenderFns","timeFix","time","Date","hour","getHours","data","isLoginError","methods","mapActions","e","validateFields","Login","force","err","setTimeout","loginParams","username","then","catch","console","finally","loginSuccess","res","$router","push","path","description","component"],"mappings":"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","file":"js/user.b365bf3d.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=5613a9ff&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main\"},[_c('a-form',{ref:\"formLogin\",staticClass:\"user-layout-login\",attrs:{\"id\":\"formLogin\",\"form\":_vm.form},on:{\"submit\":_vm.handleSubmit}},[_c('a-tabs',{attrs:{\"activeKey\":_vm.customActiveKey,\"tabBarStyle\":{ textAlign: 'center', borderBottom: 'unset' }},on:{\"change\":_vm.handleTabClick}},[_c('a-tab-pane',{key:\"tab1\",attrs:{\"tab\":\"账号密码登陆\"}},[(_vm.isLoginError)?_c('a-alert',{staticStyle:{\"margin-bottom\":\"24px\"},attrs:{\"type\":\"error\",\"showIcon\":\"\",\"message\":_vm.loginErrorMsg}}):_vm._e(),_c('a-form-item',[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([\n              'username',\n              {rules: [{ required: true, message: '账号必填' }], validateTrigger: 'change'}\n            ]),expression:\"[\\n              'username',\\n              {rules: [{ required: true, message: '账号必填' }], validateTrigger: 'change'}\\n            ]\"}],attrs:{\"size\":\"large\",\"type\":\"text\",\"placeholder\":\"输入用户名\"}},[_c('a-icon',{style:({ color: 'rgba(0,0,0,.25)' }),attrs:{\"slot\":\"prefix\",\"type\":\"user\"},slot:\"prefix\"})],1)],1),_c('a-form-item',[_c('a-input-password',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([\n              'password',\n              {rules: [{ required: true, message: '密码必填' }], validateTrigger: 'blur'}\n            ]),expression:\"[\\n              'password',\\n              {rules: [{ required: true, message: '密码必填' }], validateTrigger: 'blur'}\\n            ]\"}],attrs:{\"size\":\"large\",\"placeholder\":\"输入登录密码\"}},[_c('a-icon',{style:({ color: 'rgba(0,0,0,.25)' }),attrs:{\"slot\":\"prefix\",\"type\":\"lock\"},slot:\"prefix\"})],1)],1)],1)],1),_c('a-form-item',[_c('a-checkbox',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['rememberMe', { valuePropName: 'checked' }]),expression:\"['rememberMe', { valuePropName: 'checked' }]\"}]},[_vm._v(\"自动登录\")]),_c('a',{staticClass:\"forge-password\",staticStyle:{\"float\":\"right\"}},[_vm._v(\"忘记密码\")])],1),_c('a-form-item',{staticStyle:{\"margin-top\":\"24px\"}},[_c('a-button',{staticClass:\"login-button\",attrs:{\"size\":\"large\",\"type\":\"primary\",\"htmlType\":\"submit\",\"loading\":_vm.state.loginBtn,\"disabled\":_vm.state.loginBtn}},[_vm._v(\"登陆\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export function timeFix () {\n  const time = new Date()\n  const hour = time.getHours()\n  return hour < 9 ? '早上好' : hour <= 11 ? '上午好' : hour <= 13 ? '中午好' : hour < 20 ? '下午好' : '晚上好'\n}\n\nexport function welcome () {\n  const arr = ['休息一会儿吧', '准备吃什么呢?', '要不要打一把 DOTA', '我猜你可能累了']\n  const index = Math.floor(Math.random() * arr.length)\n  return arr[index]\n}\n\n/**\n * 触发 window.resize\n */\nexport function triggerWindowResizeEvent () {\n  const event = document.createEvent('HTMLEvents')\n  event.initEvent('resize', true, true)\n  event.eventType = 'message'\n  window.dispatchEvent(event)\n}\n\nexport function handleScrollHeader (callback) {\n  let timer = 0\n\n  let beforeScrollTop = window.pageYOffset\n  callback = callback || function () {}\n  window.addEventListener(\n    'scroll',\n    event => {\n      clearTimeout(timer)\n      timer = setTimeout(() => {\n        let direction = 'up'\n        const afterScrollTop = window.pageYOffset\n        const delta = afterScrollTop - beforeScrollTop\n        if (delta === 0) {\n          return false\n        }\n        direction = delta > 0 ? 'down' : 'up'\n        callback(direction)\n        beforeScrollTop = afterScrollTop\n      }, 50)\n    },\n    false\n  )\n}\n\nexport function isIE () {\n  const bw = window.navigator.userAgent\n  const compare = (s) => bw.indexOf(s) >= 0\n  const ie11 = (() => 'ActiveXObject' in window)()\n  return compare('MSIE') || ie11\n}\n\n/**\n * Remove loading animate\n * @param id parent element id or class\n * @param timeout\n */\nexport function removeLoadingAnimate (id = '', timeout = 1500) {\n  if (id === '') {\n    return\n  }\n  setTimeout(() => {\n    document.body.removeChild(document.getElementById(id))\n  }, timeout)\n}\nexport function scorePassword (pass) {\n  let score = 0\n  if (!pass) {\n    return score\n  }\n  // award every unique letter until 5 repetitions\n  const letters = {}\n  for (let i = 0; i < pass.length; i++) {\n      letters[pass[i]] = (letters[pass[i]] || 0) + 1\n      score += 5.0 / letters[pass[i]]\n  }\n\n  // bonus points for mixing it up\n  const variations = {\n      digits: /\\d/.test(pass),\n      lower: /[a-z]/.test(pass),\n      upper: /[A-Z]/.test(pass),\n      nonWords: /\\W/.test(pass)\n  }\n\n  let variationCount = 0\n  for (var check in variations) {\n      variationCount += (variations[check] === true) ? 1 : 0\n  }\n  score += (variationCount - 1) * 10\n\n  return parseInt(score)\n}\n","<template>\n  <div class=\"main\">\n    <a-form\n      id=\"formLogin\"\n      class=\"user-layout-login\"\n      ref=\"formLogin\"\n      :form=\"form\"\n      @submit=\"handleSubmit\"\n    >\n      <a-tabs\n        :activeKey=\"customActiveKey\"\n        :tabBarStyle=\"{ textAlign: 'center', borderBottom: 'unset' }\"\n        @change=\"handleTabClick\"\n      >\n        <a-tab-pane key=\"tab1\" tab=\"账号密码登陆\">\n          <a-alert v-if=\"isLoginError\" type=\"error\" showIcon style=\"margin-bottom: 24px;\" :message=\"loginErrorMsg\" />\n          <a-form-item>\n            <a-input\n              size=\"large\"\n              type=\"text\"\n              placeholder=\"输入用户名\"\n              v-decorator=\"[\n                'username',\n                {rules: [{ required: true, message: '账号必填' }], validateTrigger: 'change'}\n              ]\"\n            >\n              <a-icon slot=\"prefix\" type=\"user\" :style=\"{ color: 'rgba(0,0,0,.25)' }\"/>\n            </a-input>\n          </a-form-item>\n\n          <a-form-item>\n            <a-input-password\n              size=\"large\"\n              placeholder=\"输入登录密码\"\n              v-decorator=\"[\n                'password',\n                {rules: [{ required: true, message: '密码必填' }], validateTrigger: 'blur'}\n              ]\"\n            >\n              <a-icon slot=\"prefix\" type=\"lock\" :style=\"{ color: 'rgba(0,0,0,.25)' }\"/>\n            </a-input-password>\n          </a-form-item>\n        </a-tab-pane>\n      </a-tabs>\n\n      <a-form-item>\n        <a-checkbox v-decorator=\"['rememberMe', { valuePropName: 'checked' }]\">自动登录</a-checkbox>\n        <a\n          class=\"forge-password\"\n          style=\"float: right;\"\n        >忘记密码</a>\n      </a-form-item>\n\n      <a-form-item style=\"margin-top:24px\">\n        <a-button\n          size=\"large\"\n          type=\"primary\"\n          htmlType=\"submit\"\n          class=\"login-button\"\n          :loading=\"state.loginBtn\"\n          :disabled=\"state.loginBtn\"\n        >登陆</a-button>\n      </a-form-item>\n    </a-form>\n  </div>\n</template>\n\n<script>\nimport { timeFix } from '@/utils/util'\nimport { mapActions } from 'vuex'\nexport default {\n  data () {\n    return {\n      customActiveKey: 'tab1',\n      loginBtn: false,\n      isLoginError: false,\n      loginErrorMsg: '账号或密码错误',\n      form: this.$form.createForm(this),\n      state: {\n        time: 60,\n        loginBtn: false\n      }\n    }\n  },\n  methods: {\n       ...mapActions(['Login', 'Logout']),\n    handleTabClick (key) {\n      this.customActiveKey = key\n    },\n    handleSubmit (e) {\n      e.preventDefault()\n      const {\n        form: { validateFields },\n        state,\n        Login\n      } = this\n\n      state.loginBtn = true\n\n      const validateFieldsKey = ['username', 'password']\n\n      validateFields(validateFieldsKey, { force: true }, (err, values) => {\n        if (!err) {\n          const loginParams = { ...values }\n          delete loginParams.username\n          loginParams.username = values.username\n          loginParams.password = values.password\n          Login(loginParams)\n            .then((res) => this.loginSuccess(res))\n            .catch((err) => {\n             console.log(err)\n             this.isLoginError = true\n            })\n            .finally(() => {\n              state.loginBtn = false\n            })\n        } else {\n          setTimeout(() => {\n            state.loginBtn = false\n          }, 600)\n        }\n      })\n    },\n    loginSuccess (res) {\n      console.log(res)\n      this.isLoginError = false\n      this.$router.push({ path: '/' })\n      // 延迟 1 秒显示欢迎信息\n      setTimeout(() => {\n      this.$notification.success({\n        message: '欢迎',\n        description: `${timeFix()}，欢迎回来`\n      })\n      }, 500)\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.user-layout-login {\n  label {\n    font-size: 14px;\n  }\n\n  .forge-password {\n    font-size: 14px;\n  }\n\n  button.login-button {\n    padding: 0 15px;\n    font-size: 16px;\n    height: 40px;\n    width: 100%;\n  }\n\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=5613a9ff&scoped=true&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&id=5613a9ff&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5613a9ff\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}