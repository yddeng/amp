(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e4007a9"],{"328a":function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("a-modal",{attrs:{title:"执行日志",width:1e3,centered:"",footer:"",maskClosable:!0,visible:t.visible},on:{cancel:t.cancel}},[o("a-card",{attrs:{bordered:!1,size:"small"}},[o("a-descriptions",{attrs:{title:"执行信息"}},[o("a-descriptions-item",{attrs:{label:"命令名称"}},[t._v(t._s(t.cmdName))]),o("a-descriptions-item",{attrs:{label:"执行ID"}},[t._v(t._s(t.record.id))]),o("a-descriptions-item",{attrs:{label:"执行用户"}},[t._v(t._s(t.record.user))])],1),o("a-descriptions",[o("a-descriptions-item",{attrs:{label:"状态"}},[t.record.result_at>0?o("span",{staticStyle:{color:"#3CB371"}},[t._v("已完成")]):o("span",{staticStyle:{color:"#48D1CC"}},[t._v("执行中")])]),o("a-descriptions-item",{attrs:{label:"创建时间"}},[t._v(t._s(t._f("formatDate")(t.record.create_at)))]),t.record.result_at>0?o("a-descriptions-item",{attrs:{label:"执行时长"}},[t._v(t._s(t.record.result_at-t.record.create_at)+" 秒")]):t._e()],1),o("a-descriptions",[o("a-descriptions-item",{attrs:{label:"执行节点"}},[t._v(t._s(t.record.node))]),o("a-descriptions-item",{attrs:{label:"执行目录"}},[t._v('"'+t._s(t.record.dir)+'"')])],1),o("a-divider",{staticStyle:{"margin-bottom":"12px"}}),o("a-descriptions",{attrs:{title:"脚本内容"}},[o("div",[o("a-textarea",{staticStyle:{background:"#0e0e0e",color:"white"},attrs:{value:t.record.context,"auto-size":{minRows:4,maxRows:10}}})],1)]),o("a-divider",{staticStyle:{"margin-bottom":"12px"}}),o("a-descriptions",{attrs:{title:"执行结果"}},[o("div",[o("a-textarea",{staticStyle:{background:"#0e0e0e",color:"white"},attrs:{value:t.record.result,"auto-size":{minRows:4,maxRows:10}}})],1)])],1)],1)},r=[],n=o("c1df"),c=o.n(n),i={name:"LogInfo",components:{moment:c.a},props:{visible:{type:Boolean,required:!0},cmdName:{type:String,default:"null"},record:{type:Object,default:null}},data:function(){return{}},filters:{formatDate:function(t){return c.a.unix(t).format("YYYY-MM-DD HH:mm:ss")}},mounted:function(){console.log(this.cmdName,this.record)},methods:{cancel:function(){this.$emit("cancel")}}},s=i,l=o("2877"),d=Object(l["a"])(s,a,r,!1,null,null,null);e["a"]=d.exports},a398:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("page-header-wrapper",{attrs:{breadcrumb:{},title:"执行命令",content:"( "+t.cmdName+" )"},on:{back:function(){return t.$router.go(-1)}}},[o("a-card",{attrs:{bordered:!1}},[o("s-table",{ref:"table",attrs:{rowKey:"id",size:"middle",bordered:t.border,"data-name":"logList",columns:t.columns,handleMethods:t.handleDataList,data:t.loadData},scopedSlots:t._u([{key:"context",fn:function(e){return[e.length>30?o("a-tooltip",{staticStyle:{color:"#00BFFF"},attrs:{title:e}},[t._v(" "+t._s(e.slice(0,30)+"...")+" ")]):o("a-tooltip",{staticStyle:{color:"#00BFFF"},attrs:{title:e}},[t._v(" "+t._s(e)+" ")]),o("a-tooltip",[o("template",{slot:"title"},[t._v(t._s(t.copyTitle))]),o("a-icon",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e,expression:"text",arg:"copy"}],attrs:{type:"copy"},on:{click:t.copyClick}})],2)]}},{key:"statue",fn:function(e,a){return[a.result_at>0?o("span",{staticStyle:{color:"#3CB371"}},[t._v("已完成")]):o("span",{staticStyle:{color:"#48D1CC"}},[t._v("执行中")])]}},{key:"action",fn:function(e,a){return[o("div",[o("a",{on:{click:function(e){return t.showLogInfo(a)}}},[t._v("查看详情")])])]}}])})],1),o("a-log-info",{attrs:{visible:t.logInfoVisible,cmdName:t.logInfoCmd,record:t.logInfoRecord},on:{cancel:t.logInfoCancel}})],1)},r=[],n=o("5530"),c=(o("b0c0"),o("d81d"),o("c1df")),i=o.n(c),s=o("2af9"),l=o("bb62"),d=o("328a"),u=[{title:"执行ID",dataIndex:"id"},{title:"执行内容",dataIndex:"context",scopedSlots:{customRender:"context"}},{title:"执行时间",dataIndex:"create_at",customRender:function(t){return i.a.unix(t).format("YYYY-MM-DD HH:mm:ss")}},{title:"执行用户",dataIndex:"user",ellipsis:!0},{title:"状态",scopedSlots:{customRender:"statue"}},{title:"操作",scopedSlots:{customRender:"action"}}],m={name:"CmdLog",components:{STable:s["a"],"a-log-info":d["a"]},data:function(){var t=this;return{columns:u,cmdName:"",border:!1,loadData:function(e){var o=Object(n["a"])({id:t.$route.params.id},e);return Object(l["e"])(o).then((function(t){return console.log(t),t}))},copyTitle:"复制",logInfoVisible:!1,logInfoCmd:"",logInfoRecord:{}}},mounted:function(){console.log(this.$route),this.$route.params.name?this.cmdName=this.$route.params.name:this.$router.back()},methods:{handleDataList:function(t){var e=t.map((function(t){return Object(n["a"])({},t)}));return e},showLogInfo:function(t){this.logInfoVisible=!0,this.logInfoCmd=this.cmdName,this.logInfoRecord=t},logInfoCancel:function(){this.logInfoVisible=!1},copyClick:function(){var t=this;this.copyTitle="复制成功",setTimeout((function(){t.copyTitle="复制"}),1500)}}},f=m,p=o("2877"),b=Object(p["a"])(f,a,r,!1,null,"5c95d4cc",null);e["default"]=b.exports},bb62:function(t,e,o){"use strict";o.d(e,"d",(function(){return n})),o.d(e,"a",(function(){return c})),o.d(e,"b",(function(){return i})),o.d(e,"f",(function(){return s})),o.d(e,"c",(function(){return l})),o.d(e,"e",(function(){return d}));var a=o("b775"),r={cmdList:"cmd/list",cmdCreate:"cmd/create",cmdDelete:"cmd/delete",cmdUpdate:"cmd/update",cmdExec:"cmd/exec",cmdLog:"cmd/log"};function n(t){return Object(a["b"])({url:r.cmdList,method:"post",data:t})}function c(t){return Object(a["b"])({url:r.cmdCreate,method:"post",data:t})}function i(t){return Object(a["b"])({url:r.cmdDelete,method:"post",data:t})}function s(t){return Object(a["b"])({url:r.cmdUpdate,method:"post",data:t})}function l(t,e){return Object(a["b"])({url:r.cmdExec,method:"post",timeout:t,data:e})}function d(t){return Object(a["b"])({url:r.cmdLog,method:"post",data:t})}}}]);
//# sourceMappingURL=chunk-3e4007a9.eee07c86.js.map