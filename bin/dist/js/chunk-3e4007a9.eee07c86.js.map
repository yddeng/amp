{"version":3,"sources":["webpack:///./src/views/command/modal/LogInfo.vue?37d3","webpack:///src/views/command/modal/LogInfo.vue","webpack:///./src/views/command/modal/LogInfo.vue?686c","webpack:///./src/views/command/modal/LogInfo.vue","webpack:///./src/views/command/CmdLog.vue?54c0","webpack:///src/views/command/CmdLog.vue","webpack:///./src/views/command/CmdLog.vue?4cf8","webpack:///./src/views/command/CmdLog.vue","webpack:///./src/api/command.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","visible","on","cancel","_v","_s","cmdName","record","id","user","result_at","staticStyle","_f","create_at","_e","node","dir","context","minRows","maxRows","result","staticRenderFns","name","components","moment","props","type","required","default","data","filters","formatDate","time","unix","format","mounted","console","methods","$emit","component","$router","go","ref","border","columns","handleDataList","loadData","scopedSlots","_u","key","fn","text","length","slice","slot","copyTitle","directives","rawName","value","expression","arg","copyClick","$event","showLogInfo","logInfoVisible","logInfoCmd","logInfoRecord","logInfoCancel","title","dataIndex","customRender","ellipsis","STable","LogInfo","args","then","res","$route","params","back","list","item","tabList","setTimeout","cmdApi","cmdList","cmdCreate","cmdDelete","cmdUpdate","cmdExec","cmdLog","parameter","request","url","method","timeout"],"mappings":"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","file":"js/chunk-3e4007a9.eee07c86.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-modal',{attrs:{\"title\":\"执行日志\",\"width\":1000,\"centered\":\"\",\"footer\":\"\",\"maskClosable\":true,\"visible\":_vm.visible},on:{\"cancel\":_vm.cancel}},[_c('a-card',{attrs:{\"bordered\":false,\"size\":\"small\"}},[_c('a-descriptions',{attrs:{\"title\":\"执行信息\"}},[_c('a-descriptions-item',{attrs:{\"label\":\"命令名称\"}},[_vm._v(_vm._s(_vm.cmdName))]),_c('a-descriptions-item',{attrs:{\"label\":\"执行ID\"}},[_vm._v(_vm._s(_vm.record.id))]),_c('a-descriptions-item',{attrs:{\"label\":\"执行用户\"}},[_vm._v(_vm._s(_vm.record.user))])],1),_c('a-descriptions',[_c('a-descriptions-item',{attrs:{\"label\":\"状态\"}},[(_vm.record.result_at >0)?_c('span',{staticStyle:{\"color\":\"#3CB371\"}},[_vm._v(\"已完成\")]):_c('span',{staticStyle:{\"color\":\"#48D1CC\"}},[_vm._v(\"执行中\")])]),_c('a-descriptions-item',{attrs:{\"label\":\"创建时间\"}},[_vm._v(_vm._s(_vm._f(\"formatDate\")(_vm.record.create_at)))]),(_vm.record.result_at > 0)?_c('a-descriptions-item',{attrs:{\"label\":\"执行时长\"}},[_vm._v(_vm._s(_vm.record.result_at - _vm.record.create_at)+\" 秒\")]):_vm._e()],1),_c('a-descriptions',[_c('a-descriptions-item',{attrs:{\"label\":\"执行节点\"}},[_vm._v(_vm._s(_vm.record.node))]),_c('a-descriptions-item',{attrs:{\"label\":\"执行目录\"}},[_vm._v(\"\\\"\"+_vm._s(_vm.record.dir)+\"\\\"\")])],1),_c('a-divider',{staticStyle:{\"margin-bottom\":\"12px\"}}),_c('a-descriptions',{attrs:{\"title\":\"脚本内容\"}},[_c('div',[_c('a-textarea',{staticStyle:{\"background\":\"#0e0e0e\",\"color\":\"white\"},attrs:{\"value\":_vm.record.context,\"auto-size\":{ minRows: 4, maxRows: 10 }}})],1)]),_c('a-divider',{staticStyle:{\"margin-bottom\":\"12px\"}}),_c('a-descriptions',{attrs:{\"title\":\"执行结果\"}},[_c('div',[_c('a-textarea',{staticStyle:{\"background\":\"#0e0e0e\",\"color\":\"white\"},attrs:{\"value\":_vm.record.result,\"auto-size\":{ minRows: 4, maxRows: 10 }}})],1)])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <a-modal\n    title=\"执行日志\"\n    :width=\"1000\"\n    centered\n    footer=\"\"\n    :maskClosable=\"true\"\n    :visible=\"visible\"\n    @cancel=\"cancel\"\n  >\n    <a-card :bordered=\"false\" size=\"small\">\n      <a-descriptions title=\"执行信息\">\n        <a-descriptions-item label=\"命令名称\">{{ cmdName }}</a-descriptions-item>\n        <a-descriptions-item label=\"执行ID\">{{ record.id }}</a-descriptions-item>\n        <a-descriptions-item label=\"执行用户\">{{ record.user }}</a-descriptions-item>\n      </a-descriptions>\n      <a-descriptions>\n        <a-descriptions-item label=\"状态\">\n          <span v-if=\"record.result_at >0\" style=\"color:#3CB371\">已完成</span>\n          <span v-else style=\"color:#48D1CC\">执行中</span>\n        </a-descriptions-item>\n        <a-descriptions-item label=\"创建时间\">{{ record.create_at | formatDate }}</a-descriptions-item>\n        <a-descriptions-item v-if=\"record.result_at > 0\" label=\"执行时长\">{{ record.result_at - record.create_at }} 秒</a-descriptions-item>\n      </a-descriptions>\n      <a-descriptions>\n        <a-descriptions-item label=\"执行节点\">{{ record.node }}</a-descriptions-item>\n        <a-descriptions-item label=\"执行目录\">\"{{ record.dir }}\"</a-descriptions-item>\n      </a-descriptions>\n      <a-divider style=\"margin-bottom:12px\"/>\n      <a-descriptions title=\"脚本内容\">\n        <div>\n          <a-textarea\n            :value=\"record.context\"\n            :auto-size=\"{ minRows: 4, maxRows: 10 }\"\n            style=\"background: #0e0e0e; color: white\" />\n        </div>\n      </a-descriptions>\n      <a-divider style=\"margin-bottom:12px\"/>\n      <a-descriptions title=\"执行结果\">\n        <div>\n          <a-textarea\n            :value=\"record.result\"\n            :auto-size=\"{ minRows: 4, maxRows: 10 }\"\n            style=\"background: #0e0e0e; color: white\" />\n        </div>\n      </a-descriptions>\n    </a-card>\n  </a-modal>\n</template>\n\n<script>\nimport moment from 'moment'\n\nexport default {\n  name: 'LogInfo',\n  components: {\n    moment\n  },\n  props: {\n    visible: {\n      type: Boolean,\n      required: true\n    },\n    cmdName: {\n      type: String,\n      default: 'null'\n    },\n    record: {\n      type: Object,\n      default: null\n    }\n  },\n  data () {\n    return {\n\n    }\n  },\n  filters: {\n    formatDate (time) {\n      return moment.unix(time).format('YYYY-MM-DD HH:mm:ss')\n    }\n  },\n  mounted () {\n    console.log(this.cmdName, this.record)\n  },\n  methods: {\n    cancel () {\n      this.$emit('cancel')\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LogInfo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LogInfo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LogInfo.vue?vue&type=template&id=25ddfdb4&\"\nimport script from \"./LogInfo.vue?vue&type=script&lang=js&\"\nexport * from \"./LogInfo.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('page-header-wrapper',{attrs:{\"breadcrumb\":{},\"title\":\"执行命令\",\"content\":'( ' + _vm.cmdName + ' )'},on:{\"back\":function () { return _vm.$router.go(-1); }}},[_c('a-card',{attrs:{\"bordered\":false}},[_c('s-table',{ref:\"table\",attrs:{\"rowKey\":\"id\",\"size\":\"middle\",\"bordered\":_vm.border,\"data-name\":\"logList\",\"columns\":_vm.columns,\"handleMethods\":_vm.handleDataList,\"data\":_vm.loadData},scopedSlots:_vm._u([{key:\"context\",fn:function(text){return [(text.length > 30)?_c('a-tooltip',{staticStyle:{\"color\":\"#00BFFF\"},attrs:{\"title\":text}},[_vm._v(\" \"+_vm._s(text.slice(0, 30) + '...')+\" \")]):_c('a-tooltip',{staticStyle:{\"color\":\"#00BFFF\"},attrs:{\"title\":text}},[_vm._v(\" \"+_vm._s(text)+\" \")]),_c('a-tooltip',[_c('template',{slot:\"title\"},[_vm._v(_vm._s(_vm.copyTitle))]),_c('a-icon',{directives:[{name:\"clipboard\",rawName:\"v-clipboard:copy\",value:(text),expression:\"text\",arg:\"copy\"}],attrs:{\"type\":\"copy\"},on:{\"click\":_vm.copyClick}})],2)]}},{key:\"statue\",fn:function(text, record){return [(record.result_at > 0)?_c('span',{staticStyle:{\"color\":\"#3CB371\"}},[_vm._v(\"已完成\")]):_c('span',{staticStyle:{\"color\":\"#48D1CC\"}},[_vm._v(\"执行中\")])]}},{key:\"action\",fn:function(text, record){return [_c('div',[_c('a',{on:{\"click\":function($event){return _vm.showLogInfo(record)}}},[_vm._v(\"查看详情\")])])]}}])})],1),_c('a-log-info',{attrs:{\"visible\":_vm.logInfoVisible,\"cmdName\":_vm.logInfoCmd,\"record\":_vm.logInfoRecord},on:{\"cancel\":_vm.logInfoCancel}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <page-header-wrapper\n    :breadcrumb=\"{}\"\n    title=\"执行命令\"\n    :content=\"'( ' + cmdName + ' )'\"\n    @back=\"() => $router.go(-1)\"\n  >\n\n    <a-card :bordered=\"false\">\n      <s-table\n        rowKey=\"id\"\n        ref=\"table\"\n        size=\"middle\"\n        :bordered=\"border\"\n        data-name=\"logList\"\n        :columns=\"columns\"\n        :handleMethods=\"handleDataList\"\n        :data=\"loadData\"\n      >\n\n        <template slot=\"context\" slot-scope=\"text\" >\n          <a-tooltip v-if=\"text.length > 30\" :title=\"text\" style=\"color:#00BFFF\">\n            {{ text.slice(0, 30) + '...' }}\n          </a-tooltip>\n          <a-tooltip v-else :title=\"text\" style=\"color:#00BFFF\">\n            {{ text }}\n          </a-tooltip>\n          <a-tooltip >\n            <template slot=\"title\">{{ copyTitle }}</template>\n            <a-icon\n              type=\"copy\"\n              v-clipboard:copy=\"text\"\n              @click=\"copyClick\"/>\n          </a-tooltip>\n        </template>\n\n        <template slot=\"statue\" slot-scope=\"text, record\">\n          <span v-if=\"record.result_at > 0\" style=\"color:#3CB371\">已完成</span>\n          <span v-else style=\"color:#48D1CC\">执行中</span>\n        </template>\n\n        <template slot=\"action\" slot-scope=\"text, record\">\n          <div >\n            <a @click=\"showLogInfo(record)\">查看详情</a>\n          </div>\n        </template>\n      </s-table>\n    </a-card>\n\n    <a-log-info\n      :visible=\"logInfoVisible\"\n      :cmdName=\"logInfoCmd\"\n      :record=\"logInfoRecord\"\n      @cancel=\"logInfoCancel\"\n    >\n    </a-log-info>\n  </page-header-wrapper>\n</template>\n\n<script>\nimport moment from 'moment'\nimport { STable } from '@/components'\nimport { cmdLog } from '@/api/command'\nimport LogInfo from './modal/LogInfo'\n\nconst columns = [\n  {\n    title: '执行ID',\n    dataIndex: 'id'\n  },\n  {\n    title: '执行内容',\n    dataIndex: 'context',\n    scopedSlots: { customRender: 'context' }\n  },\n  {\n    title: '执行时间',\n    dataIndex: 'create_at',\n    customRender: (text) => moment.unix(text).format('YYYY-MM-DD HH:mm:ss')\n  },\n  {\n    title: '执行用户',\n    dataIndex: 'user',\n    ellipsis: true\n  },\n  {\n    title: '状态',\n    scopedSlots: { customRender: 'statue' }\n  },\n  {\n    title: '操作',\n    scopedSlots: { customRender: 'action' }\n  }\n]\nexport default {\n  name: 'CmdLog',\n  components: {\n    STable,\n    'a-log-info': LogInfo\n  },\n  data () {\n    return {\n      columns,\n      cmdName: '',\n      border: false,\n      loadData: parameter => {\n        const args = { id: this.$route.params.id, ...parameter }\n        return cmdLog(args).then(res => {\n          console.log(res)\n          return res\n        })\n      },\n      copyTitle: '复制',\n\n      logInfoVisible: false,\n      logInfoCmd: '',\n      logInfoRecord: {}\n    }\n  },\n  mounted () {\n    console.log(this.$route)\n    if (!this.$route.params.name) {\n      this.$router.back()\n    } else {\n      this.cmdName = this.$route.params.name\n    }\n  },\n  methods: {\n    handleDataList (list) {\n      const tabList = list.map((item) => {\n        return {\n          ...item\n        }\n      })\n      return tabList\n    },\n    showLogInfo (record) {\n      this.logInfoVisible = true\n      this.logInfoCmd = this.cmdName\n      this.logInfoRecord = record\n    },\n    logInfoCancel () {\n      this.logInfoVisible = false\n    },\n    copyClick () {\n      this.copyTitle = '复制成功'\n      setTimeout(() => {\n        this.copyTitle = '复制'\n      }, 1500)\n    }\n  }\n}\n\n</script>\n\n<style lang=\"less\" scoped>\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CmdLog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CmdLog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CmdLog.vue?vue&type=template&id=5c95d4cc&scoped=true&\"\nimport script from \"./CmdLog.vue?vue&type=script&lang=js&\"\nexport * from \"./CmdLog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5c95d4cc\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/request'\n\nconst cmdApi = {\n  cmdList: 'cmd/list',\n  cmdCreate: 'cmd/create',\n  cmdDelete: 'cmd/delete',\n  cmdUpdate: 'cmd/update',\n  cmdExec: 'cmd/exec',\n  cmdLog: 'cmd/log'\n}\n\n/**\n * login func\n * parameter: {\n *     username: '',\n *     password: '',\n *     remember_me: true,\n *     captcha: '12345'\n * }\n * @param parameter\n * @returns {*}\n */\nexport function cmdList (parameter) {\n  return request({\n    url: cmdApi.cmdList,\n    method: 'post',\n    data: parameter\n  })\n}\n\nexport function cmdCreate (parameter) {\n  return request({\n    url: cmdApi.cmdCreate,\n    method: 'post',\n    data: parameter\n  })\n}\n\nexport function cmdDelete (parameter) {\n  return request({\n    url: cmdApi.cmdDelete,\n    method: 'post',\n    data: parameter\n  })\n}\n\nexport function cmdUpdate (parameter) {\n  return request({\n    url: cmdApi.cmdUpdate,\n    method: 'post',\n    data: parameter\n  })\n}\n\nexport function cmdExec (timeout, parameter) {\n  return request({\n    url: cmdApi.cmdExec,\n    method: 'post',\n    timeout: timeout,\n    data: parameter\n  })\n}\n\nexport function cmdLog (parameter) {\n  return request({\n    url: cmdApi.cmdLog,\n    method: 'post',\n    data: parameter\n  })\n}\n"],"sourceRoot":""}